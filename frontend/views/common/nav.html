<div class="navbar bg-[#c8f097] text-base-content rounded-b-lg shadow-md mb-4 z-50">
    <!-- Navbar Start: Logo & Mobile Menu -->
    <div class="navbar-start">
        <!-- Mobile Dropdown -->
        <div class="dropdown">
            <div tabindex="0" role="button" class="btn btn-ghost lg:hidden">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h8m-8 6h16" />
                </svg>
            </div>
            <ul tabindex="0" class="menu menu-sm dropdown-content mt-3 z-[1] p-2 shadow bg-base-100 rounded-box w-52">
                <li>
                    <a>종목</a>
                    <ul class="p-2">
                        <li><a href="/page?path=stock/find"><i class="bi bi-search-heart"></i> 종목찾기</a></li>
                        <li><a href="/page?path=stock/mystock"><i class="bi bi-heart"></i> 관심종목</a></li>
                        <li><a href="/page?path=mystock/test1">TEST페이지</a></li>
                        <li>
                            <div class="divider my-1"></div>
                        </li>
                        <li><a href="/page?path=mystock/foreign_trade">외국인 매매종목</a></li>
                        <li><a href="/page?path=kis/kis-opinion">증권사-투자의견</a></li>
                        <li>
                            <div class="divider my-1"></div>
                        </li>
                        <li><a href="/page?path=kis/kis-attension">KIS-관심종목</a></li>
                        <li><a href="/page?path=kis/kis-psearch">KIS-조건식</a></li>
                        <li><a href="/page?path=kis/kis-ranking">KIS-상위종목</a></li>
                        <li>
                            <div class="divider my-1"></div>
                        </li>
                        <li><a href="/page?path=ls/ls-ranking">LS-상위종목</a></li>
                    </ul>
                </li>
                <li>
                    <a>계좌</a>
                    <ul class="p-2">
                        <li><a href="/page?path=stkcompany/kiwoom/account/list">계좌현황</a></li>
                        <li><a href="/page?path=stkcompany/kiwoom/account/detail">계좌상세</a></li>
                        <li>
                            <div class="divider my-1"></div>
                        </li>
                        <li><a href="/page?path=stkcompany/kiwoom/account/fill">체결내역</a></li>
                        <li><a href="/page?path=stkcompany/kiwoom/account/balance">체결잔고</a></li>
                        <li>
                            <div class="divider my-1"></div>
                        </li>
                        <li><a href="/page?path=stkcompany/kiwoom/account/profit_lose">계좌손익</a></li>
                    </ul>
                </li>
                <li>
                    <a>관리</a>
                    <ul class="p-2">
                        <li><a href="/page?path=/manage/diary/list">일지</a></li>
                        <li><a href="/page?path=/manage/daemon/list">K-데몬</a></li>
                        <li><a href="/page?path=/manage/scheduler/list">K-스케줄러</a></li>
                    </ul>
                </li>
                <li>
                    <a>매수/매도</a>
                    <ul class="p-2">
                        <li><a href="/page?path=order/buy&stk_code=12345">매수</a></li>
                        <li><a href="/page?path=order/sell&stk_code=12345">매도</a></li>
                    </ul>
                </li>
                <li>
                    <a>테스트</a>
                    <ul class="p-2">
                        <li><a href="/page?path=test/test1">test1</a></li>
                    </ul>
                </li>
            </ul>
        </div>

        <!-- Logo -->
        <a href="https://www1.kiwoom.com/h/main" target="_blank" class="btn btn-ghost text-xl normal-case h-auto py-1">
            <img src="/public/images/kiwi7-logo.svg" alt="Kiwoom Securities logo" class="h-8 mr-2" />
            <span class="hidden sm:inline">키움증권-{{data.title | default('주식매매') }}</span>
        </a>

        <ul class="menu menu-horizontal px-1">
            <li>
                <details>
                    <summary class="font-bold">종목</summary>
                    <ul class="p-2 z-[50] bg-base-100 w-52 shadow-md">
                        <li><a href="/page?path=stock/find"><i class="bi bi-search-heart"></i> 종목찾기</a></li>
                        <li><a href="/page?path=stock/mystock"><i class="bi bi-heart"></i> 관심종목</a></li>
                        <li><a href="/page?path=mystock/test1">TEST페이지</a></li>
                        <div class="divider my-0"></div>
                        <li><a href="/page?path=mystock/foreign_trade">외국인 매매종목</a></li>
                        <li><a href="/page?path=kis/kis-opinion">증권사-투자의견</a></li>
                        <div class="divider my-0"></div>
                        <li><a href="/page?path=kis/kis-attension">KIS-관심종목</a></li>
                        <li><a href="/page?path=kis/kis-psearch">KIS-조건식</a></li>
                        <li><a href="/page?path=kis/kis-ranking">KIS-상위종목</a></li>
                        <div class="divider my-0"></div>
                        <li><a href="/page?path=ls/ls-ranking">LS-상위종목</a></li>
                    </ul>
                </details>
            </li>
            <li>
                <details>
                    <summary class="font-bold">계좌</summary>
                    <ul class="p-2 z-[50] bg-base-100 w-40 shadow-md">
                        <li><a href="/page?path=account/list">계좌현황</a></li>
                        <li><a href="/page?path=account/detail">계좌상세</a></li>
                        <div class="divider my-0"></div>
                        <li><a href="/page?path=account/fill">체결내역</a></li>
                        <li><a href="/page?path=account/balance">체결잔고</a></li>
                        <div class="divider my-0"></div>
                        <li><a href="/page?path=account/profit_lose">계좌손익</a></li>
                    </ul>
                </details>
            </li>
            <li>
                <details>
                    <summary class="font-bold">관리</summary>
                    <ul class="p-2 z-[50] bg-base-100 w-40 shadow-md">
                        <li><a href="/page?path=/manage/diary/list">일지</a></li>
                        <li><a href="/page?path=/manage/daemon/list">K-데몬</a></li>
                        <li><a href="/page?path=/manage/scheduler/list">K-스케줄러</a></li>
                    </ul>
                </details>
            </li>
            <li>
                <details>
                    <summary class="font-bold">매수/매도</summary>
                    <ul class="p-2 z-[50] bg-base-100 w-40 shadow-md">
                        <li><a href="/page?path=order/buy&stk_code=12345">매수</a></li>
                        <li><a href="/page?path=order/sell&stk_code=12345">매도</a></li>
                    </ul>
                </details>
            </li>
            <li>
                <details>
                    <summary class="font-bold">테스트</summary>
                    <ul class="p-2 z-[50] bg-base-100 w-40 shadow-md">
                        <li><a href="/page?path=test/test1">test1</a></li>
                    </ul>
                </details>
            </li>
        </ul>
    </div>

    <!-- Navbar End: Right Side Items -->
    <div class="navbar-end">
        {% include "common/nav_right.html" %}
    </div>
</div>

<script>
    // 네비게이션 메뉴 자동 닫기 스크립트
    // 다른 메뉴를 열 때 기존에 열려있는 메뉴를 닫습니다.
    document.addEventListener("DOMContentLoaded", function() {
        // 데스크탑 메뉴의 details 요소들 (menu-horizontal 클래스 내부)
        const details = document.querySelectorAll(".menu-horizontal details");
        
        details.forEach((targetDetail) => {
            targetDetail.addEventListener("click", () => {
                // 클릭된 details 이외의 다른 details가 열려있다면 닫음
                details.forEach((detail) => {
                    if (detail !== targetDetail && detail.hasAttribute("open")) {
                        detail.removeAttribute("open");
                    }
                });
            });
        });

        // (선택사항) 메뉴 외부를 클릭했을 때 닫기 기능을 원한다면 아래 주석 해제
        /*
        document.addEventListener("click", (event) => {
            if (!event.target.closest(".menu-horizontal details")) {
                details.forEach((detail) => {
                    detail.removeAttribute("open");
                });
            }
        });
        */
    });
</script>