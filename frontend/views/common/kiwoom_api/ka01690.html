<div x-data="profitKa01690()" id="tab-ka01690" class="tab-pane p-3">
    <form class="row g-2 align-items-end mb-3" @submit.prevent="search()">
        <div class="col-auto">
            <label class="form-label small mb-1">조회일자</label>
            <input type="date" x-model="qryDate" class="form-control form-control-sm" />
        </div>
        <div class="col-auto">
            <button class="btn btn-primary btn-sm" type="submit">조회</button>
            <button class="btn btn-outline-secondary btn-sm" type="button" @click="reset()">초기화</button>
        </div>
    </form>
    <template x-if="records && records.length">
<div class="row mb-3">
  <div class="col-md-12">
    <div class="card shadow-sm">
      <div class="card-header bg-light fw-bold small">요약</div>
      <div class="card-body p-3">
        <div class="row text-center g-3">
          <div class="col-6 col-md-2">
            <div class="border rounded p-2 h-100">
              <div class="small text-muted">총 매수금액</div>
              <div class="fw-bold text-primary mt-1" x-text="formatNumber(summary.tot_buy_amt)"></div>
            </div>
          </div>
          <div class="col-6 col-md-2">
            <div class="border rounded p-2 h-100">
              <div class="small text-muted">총 평가금액</div>
              <div class="fw-bold text-success mt-1" x-text="formatNumber(summary.tot_evlt_amt)"></div>
            </div>
          </div>
          <div class="col-6 col-md-2">
            <div class="border rounded p-2 h-100">
              <div class="small text-muted">총 평가손익</div>
              <div class="fw-bold" :class="summary.tot_evltv_prft >= 0 ? 'text-success' : 'text-danger'"
                   x-text="formatNumber(summary.tot_evltv_prft)"></div>
            </div>
          </div>
          <div class="col-6 col-md-2">
            <div class="border rounded p-2 h-100">
              <div class="small text-muted">수익률</div>
              <div class="fw-bold" :class="summary.tot_prft_rt >= 0 ? 'text-success' : 'text-danger'"
                   x-text="summary.tot_prft_rt ?? '-'"></div>
            </div>
          </div>
          <div class="col-6 col-md-2">
            <div class="border rounded p-2 h-100">
              <div class="small text-muted">예수금</div>
              <div class="fw-bold text-info mt-1" x-text="formatNumber(summary.dbst_bal)"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

    </template>
    <template x-if="records && records.length">
        <div class="table-responsive">
            <table class="table table-sm table-bordered table-hover align-middle">
                <thead class="table-light">
                    <tr>
                        <th>종목코드</th>
                        <th>종목명</th>
                        <th class="text-end">보유수량</th>
                        <th class="text-end">매입단가</th>
                        <th class="text-end">현재가</th>
                        <th class="text-end">평가액</th>
                        <th class="text-end">평가손익</th>
                        <th class="text-end">수익률</th>
                        <th class="text-end">매수비중</th>
                        <th class="text-end">평가비중</th>
                    </tr>
                </thead>
                <tbody>
                    <template x-for="(r, idx) in records" :key="idx">
                        <tr>
                            <td x-text="r['종목코드'] ?? r.stk_cd ?? r['stk_cd'] ?? '-' "></td>
                            <td x-text="r['종목명'] ?? r.stk_nm ?? '-' "></td>
                            <td class="text-end" x-text="formatNumber(r['보유수량'] ?? r.rmnd_qty ?? r['보유수량(수)'] ?? '-')"></td>
                            <td class="text-end" x-text="formatNumber(r['총 매입가'] ?? r['매입단가'] ?? r['매입가'] ?? r.buy_uv ?? '-')"></td>
                            <td class="text-end" x-text="formatNumber(r['현재가'] ?? r.cur_prc ?? '-')"></td>
                            <td class="text-end" x-text="formatNumber(r['평가액'] ?? r.evlt_amt ?? '-')"></td>
                            <td class="text-end" x-text="formatNumber(r['평가손익'] ?? r.evltv_prft ?? '-')"></td>
                            <td class="text-end" x-text="r['수익률'] ?? r.prft_rt ?? r.tot_prft_rt ?? '-' "></td>
                            <td class="text-end" x-text="r['매수비중'] ?? r.buy_wght ?? '-' "></td>
                            <td class="text-end" x-text="r['평가비중'] ?? r.evlt_wght ?? '-' "></td>
                        </tr>
                    </template>
                </tbody>
            </table>
        </div>
    </template>

    <div x-show="!records || records.length === 0" class="text-muted">표시할 결과가 없습니다.</div>
</div>
